<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>

    <!-- CSS & jQuery -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>
    <!--form data-->
    <div class="container">
        <br>
        <h2>Survey Questions</h2>
        <br>

        <h3><strong>About You</strong></h3>
        <br>
        <br>

        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>
        <br>

        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Do you consider yourself outdoorsy?</h4>
            </label>
            <select class="answer" id="questionOne">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Do you like trying new foods & new restaurants?</h4>
            </label>
            <select class="answer" id="questionTwo">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Do you like to read?</h4>
            </label>
            <select class="answer" id="questionThree">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Are you a big sports fan?</h4>
            </label>
            <select class="answer" id="questionFour">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Do you like going to museums?</h4>
            </label>
            <select class="answer" id="questionFive">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>


        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Are you energized by socializing with groups of people?</h4>
            </label>
            <select class="answer" id="questionSix">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>


        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Or do you prefer to hang out with friends one-on-one or in small groups?</h4>
            </label>
            <select class="answer" id="questionSeven">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>


        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Do you like playing board games?</h4>
            </label>
            <select class="answer" id="questionEight">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Do you like seeing live music/concerts?</h4>
            </label>
            <select class="answer" id="questionNine">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>

        <div class="form-group">
            <label for="exampleFormControlSelect1">
                <h4>Is it important to you that your friends have a sense of humor?</h4>
            </label>
            <select class="answer" id="questionTen">
                <option value="1">1 (Not at all)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Very Much!)</option>
            </select>
        </div>
        <br>
        <br>

        <button class="btn btn-primary" type="submit" id="submit">Submit</button>

        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends Link</a>
            </div>
        </footer>

    </div>



    </div>

    <!-- Modal -->
    <div id="modal-match" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="best-match">
                    <h5 class="best-match">Your Best Match</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Based on your survey responses, here's your best friend match!</p>
                    <h2 id="friend-name"></h2>
                    <img id="friend-img" src="" alt="friend image">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .model-content {
            margin: 2px;
            outline: none;
        }
    </style>


    <script type="text/javascript">

        // form handling
        $("#submit").on("click", function (event) {
            event.preventDefault();

            // form validation
            function validateForm() {
                var isValid = true;
                $(".form-control").each(function () {
                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });

                $(".answer").each(function () {

                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });
                return isValid;
            }

            // if the form has been filled out, grab the data and post it to the API
            if (validateForm()) {
                // Create an object for the user"s data
                var surveyData = {
                    name: $("#name").val(),
                    photo: $("#photo").val(),
                    scores: [
                        $("#questionOne").val(),
                        $("#questionTwo").val(),
                        $("#questionThree").val(),
                        $("#questionFour").val(),
                        $("#questionFive").val(),
                        $("#questionSix").val(),
                        $("#questionSeven").val(),
                        $("#questionEight").val(),
                        $("#questionNine").val(),
                        $("#questionTen").val()
                    ]
                };

                // post the response to the friends api
                $.post("/api/friends", surveyData, function (data) {

                    console.log("the friend match is: " + data.name);

                    // Get the matching friend from the post
                    $("#friend-name").text(data.name);
                    $("#friend-img").attr("src", data.photo);

                    // display modal with friend info
                    $("#modal-match").modal("toggle");

                });
            } else {
                alert("Please fill out all form fields!");
            }
        });
    </script>

</body>

</html>